blueprint:
  name: Siren – Phát âm thanh có thời lượng
  description: >
    Kích hoạt còi ESPHome với lựa chọn âm thanh, âm lượng và thời lượng.
  domain: automation

  input:
    siren_switch:
      name: Công tắc kích hoạt còi
      selector:
        entity:
          domain: switch
    sound_entity:
      name: Thực thể âm thanh
      selector:
        entity:
          domain: select

    volume_entity:
      name: Thực thể âm lượng
      selector:
        entity:
          domain: select
          
    sound_option:
      name: Chọn âm thanh
      selector:
        select:
          options:
            - Doorbell
            - Fur Elise
            - Big Ben
            - Ring Ring
            - Lone Ranger
            - Turkish March
            - High Pitched
            - Red Alert
            - Crickets
            - Beep
            - Dog Bark
            - Police Siren
            - Grandfather Clock
            - Phone Ring
            - Fire Truck
            - Clock Chime
            - Alarm Clock
            - School Bell

    volume_option:
      name: Âm lượng
      selector:
        select:
          options:
            - Cao
            - Trung bình
            - Thấp

    duration:
      name: Thời lượng (giây)
      default: 5
      selector:
        number:
          min: 0
          max: 180
          step: 1
          unit_of_measurement: s

    trigger_event:
      name: Điều kiện kích hoạt
      selector:
        trigger:

mode: restart

trigger: !input trigger_event

action:
  - service: select.select_option
    target:
      entity_id: !input sound_entity
    data:
      option: !input sound_option

  - service: select.select_option
    target:
      entity_id: !input volume_entity
    data:
      option: !input volume_option

  - service: switch.turn_on
    target:
      entity_id: !input siren_switch

  - delay:
      seconds: !input duration

  - service: switch.turn_off
    target:
      entity_id: !input siren_switch
